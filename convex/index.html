<!DOCTYPE html>
<html>

<head>
    <title>Convex</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src='https://unpkg.com/@turf/turf'></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id='map'></div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZHVuaWFkYW51IiwiYSI6Ii02R2M3ekUifQ.Gr5zpPA2nEHYeqqSz1yRQw';
        var map = window.map = new mapboxgl.Map({
            container: 'map',
            zoom: 4,
            center: [117, -2],
            style: 'mapbox://styles/mapbox/streets-v9',
            hash: true
        });

        map.on('load', function() {
            var data = [{
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010102  ",
                "kecamatan": "Kec. Kepulauan Seribu Utara",
                "id": "80E6E595-2BF5-E011-A402-77741B4E5AAD",
                "npsn": "20107711",
                "sekolah": "SMP NEGERI SATU ATAP 02 PULAU SABIRA",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Pulau Harapan",
                "lintang": "-5.2056000",
                "bujur": "106.4603000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010102  ",
                "kecamatan": "Kec. Kepulauan Seribu Utara",
                "id": "C0F5E595-2BF5-E011-B37B-89DFD57B7D37",
                "npsn": "20106342",
                "sekolah": "SMP NEGERI 133 JAKARTA",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Jl. Pulau Pramuka Rt. 003 Rw. 05",
                "lintang": "-5.7471000",
                "bujur": "106.6138000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010101  ",
                "kecamatan": "Kec. Kepulauan Seribu Selatan",
                "id": "B0A8E595-2BF5-E011-A9F1-D7B4938500AA",
                "npsn": "20106344",
                "sekolah": "SMPN 288 JAKARTA",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Pulau Lancang",
                "lintang": "-5.9361000",
                "bujur": "106.5943000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010101  ",
                "kecamatan": "Kec. Kepulauan Seribu Selatan",
                "id": "40C6E595-2BF5-E011-B2F2-796762867641",
                "npsn": "20106343",
                "sekolah": "SMP NEGERI 241",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Jl. Pendidikan",
                "lintang": "-5.7985000",
                "bujur": "106.5003000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010101  ",
                "kecamatan": "Kec. Kepulauan Seribu Selatan",
                "id": "A0B7E595-2BF5-E011-A14B-DDC6D9AEA233",
                "npsn": "20106347",
                "sekolah": "SMP NEGERI 285 JAKARTA",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Jl. Pulau Edam",
                "lintang": "-5.9788000",
                "bujur": "106.7098000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010101  ",
                "kecamatan": "Kec. Kepulauan Seribu Selatan",
                "id": "D06E0A94-2BF5-E011-88F0-F7CF3402F1E9",
                "npsn": "20107183",
                "sekolah": "SMP NEGERI SATU ATAP 01 P. PARI",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Pulau Pari",
                "lintang": "-5.8578000",
                "bujur": "106.6196000"
            }, {
                "kode_prop": "010000  ",
                "propinsi": "Prov. D.K.I. Jakarta",
                "kode_kab_kota": "010100  ",
                "kabupaten_kota": "Kab. Kepulauan Seribu",
                "kode_kec": "010102  ",
                "kecamatan": "Kec. Kepulauan Seribu Utara",
                "id": "80D5E595-2BF5-E011-B48B-FDC34486D625",
                "npsn": "20106346",
                "sekolah": "SMP NEGERI 260 JAKARTA",
                "bentuk": "SMP",
                "status": "N",
                "alamat_jalan": "Pulau Harapan Rt. 05\/02",
                "lintang": "-5.6535000",
                "bujur": "106.5797000"
            }];
            var points = [];
            for (var i = 0; i < data.length; i++) {
                points.push(turf.point([parseFloat(data[i]['bujur']), parseFloat(data[i]['lintang'])]))
            }
            var col = turf.featureCollection(points);
            var hull = turf.convex(col);
            var datas = hull
            var bbox = turf.bbox(datas);
            map.fitBounds(bbox);
            map.addLayer({
                "id": "polygon",
                "type": "fill",
                "source": {
                    "type": "geojson",
                    "data": datas
                },
                'layout': {},
                'paint': {
                    'fill-color': '#088',
                    'fill-opacity': 0.8
                }
            });
            map.addLayer({
                "id": "points",
                "type": "symbol",
                "source": {
                    "type": "geojson",
                    "data": col
                },
                "layout": {
                    "icon-image": "monument-15",
                }
            });
        })
    </script>
</body>

</html>